<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/3.0.4/jquery.imagesloaded.min.js"></script>
<script type="text/javascript">
(function stickyFooter($){

	var stickyClass = 'sticky-bottom';
	var $envira = $('.envira-gallery-wrap');

	function stickToBottom () {

		var $siteFooter   = $('.site-footer');
		var $beforeFooter = $('.before-footer');
		var $both         = $siteFooter.add($beforeFooter);

		if($(window).height()>$('body').height()) {

			if(!$both.hasClass(stickyClass)) {
				$both.addClass(stickyClass);
			}
			
			$beforeFooter.css('bottom', $siteFooter.outerHeight());
			$siteFooter.css('bottom', 0);

		} else {

			$both.css('bottom','');
			$both.removeClass(stickyClass);

		}

	}

	// On DOM Ready on pages without Envira Gallery
	if ($envira.length === 0) {

		stickToBottom();
		// On Resize
		$(window).resize(stickToBottom);

	} else {
		$envira.imagesLoaded(function(){
			stickToBottom();
			$(window).resize(stickToBottom);
		});
	}
})(jQuery);
</script>